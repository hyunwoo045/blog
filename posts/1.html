<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/abefa9f2433dc1b3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/abefa9f2433dc1b3.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-d1728c3a778f1232.js" defer=""></script><script src="/_next/static/chunks/pages/_app-74903d276c4233f7.js" defer=""></script><script src="/_next/static/chunks/570-bdec8792f1cf9171.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-ca43962f59c7d3c7.js" defer=""></script><script src="/_next/static/cdtoWMg52IhiWI2Amhzpf/_buildManifest.js" defer=""></script><script src="/_next/static/cdtoWMg52IhiWI2Amhzpf/_ssgManifest.js" defer=""></script><style id="__jsx-971e8a04ba2bb225">.header.jsx-971e8a04ba2bb225{position:fixed;top:0;left:0;width:100%;height:60px;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.1);-moz-box-shadow:0 2px 4px rgba(0,0,0,.1);box-shadow:0 2px 4px rgba(0,0,0,.1);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;.logo.jsx-971e8a04ba2bb225{position:relative;left:10px;width:55px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;opacity:.6;background-color:#f00;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer}.header__title.jsx-971e8a04ba2bb225{margin-left:34px;font-size:18px;cursor:pointer}.header__nav.jsx-971e8a04ba2bb225{position:absolute;right:20px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;.nav__item.jsx-971e8a04ba2bb225:before{content:"";width:1px;height:12px;background-color:#e5e5e5;position:absolute;top:0;bottom:0;margin:auto}.nav__item.jsx-971e8a04ba2bb225:first-child:before{display:none}.nav__item.jsx-971e8a04ba2bb225{position:relative;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;.nav__item__inner.jsx-971e8a04ba2bb225{display:block;font-size:12px;padding:11px 24px;color:#656565}}}}</style><style id="__jsx-4eaf6378c4a9ee0a">.page__content.jsx-4eaf6378c4a9ee0a{width:76%;margin:auto}pre.jsx-4eaf6378c4a9ee0a{font-size:11px}</style></head><body><div id="__next"><div class="jsx-971e8a04ba2bb225 header"><div class="jsx-971e8a04ba2bb225 logo"><img alt="main" loading="lazy" width="55" height="55" decoding="async" data-nimg="1" style="color:transparent" src="/images/ori_running.gif"/></div><div class="jsx-971e8a04ba2bb225 header__title">ë ˆë¡œë¡œì˜ ê°œë°œ ë¸Œì´ë¡œê·¸ ğŸ</div><div class="jsx-971e8a04ba2bb225 header__nav"><div class="jsx-971e8a04ba2bb225 nav__item"><span class="jsx-971e8a04ba2bb225 nav__item__inner">about</span></div><div class="jsx-971e8a04ba2bb225 nav__item"><span class="jsx-971e8a04ba2bb225 nav__item__inner"><a href="https://github.com/hyunwoo045"><img alt="github_logo" loading="lazy" width="30" height="30" decoding="async" data-nimg="1" style="color:transparent" src="/images/github_icon.png"/></a></span></div></div></div><main><div class="post__content"><section class="jsx-4eaf6378c4a9ee0a page__content e-content"><ul>
<li>ê¸°ê°„: 2022. 11 ~ 2022. 12, ì•½ 2ê°œì›”</li>
<li>ì£¼ìš” ì—…ë¬´: ì½”ë§¥ìŠ¤ í´ë¼ìš°ë“œ 2.0 ì–´ë“œë¯¼ í˜ì´ì§€ ë‚´ ë¦¬ì†ŒìŠ¤ ë²„ì „ ë“±ë¡ í˜ì´ì§€ ê°œë°œ</li>
<li>ì—…ë¬´ ëª©ì : ì‹¤ì œ ìœ í†µëœ ë¦¬ì†ŒìŠ¤(ì›”íŒ¨ë“œ, ë¡œë¹„í° ë“±) ë‚´ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë²„ì „ ë“±ë¡/ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•œ í˜ì´ì§€ ê°œë°œ</li>
<li>ê°œë°œ ì¸ì›: 1ì¸</li>
<li>í”„ë¡œì íŠ¸ ìŠ¤í™<!-- -->
<ul>
<li>Spring Boot</li>
<li>Spring Web MVC</li>
<li>Spring Security</li>
<li>QueryDSL</li>
<li>Vue.js</li>
</ul>
</li>
</ul>
<p>ê¸°ì¡´ ì½”ë§¥ìŠ¤ í´ë¼ìš°ë“œ 2.0 ì˜ ê´€ë¦¬ì í˜ì´ì§€ì— OTA(Over The Air) ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ëŠ” ê°œë°œ ê±´ì˜
ì—¬ëŸ¬ ìš”êµ¬ì‚¬í•­ ì¤‘ ì‹ ê·œ ë²„ì „ ë“±ë¡ì„ ìœ„í•œ í˜ì´ì§€ë¥¼ ê°œë°œí•˜ëŠ” ì—…ë¬´ë¥¼ ë‹´ë‹¹í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<hr/>
<h2>í”„ë¡œì íŠ¸ êµ¬ì¡° ë¶„ì„</h2>
<p>ê¸°ë³¸ì ìœ¼ë¡œ Spring Web MVC í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•œ í”„ë¡œì íŠ¸ë¡œ Apache Tiles ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬
íƒ€ì¼ ê¸°ë°˜ì˜ ë ˆì´ì•„ì›ƒì„ êµ¬í˜„í•œ ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.</p>
<pre><div style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-java" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>
</span><span></span><span class="token annotation" style="color:#999">@Configuration</span><span>
</span><span></span><span class="token" style="color:#07a">public</span><span> </span><span class="token" style="color:#07a">class</span><span> </span><span class="token" style="color:#DD4A68">WebMvcConfig</span><span> </span><span class="token" style="color:#07a">implements</span><span> </span><span class="token" style="color:#DD4A68">WebMvcConfigurer</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">public</span><span> </span><span class="token" style="color:#07a">void</span><span> </span><span class="token" style="color:#DD4A68">configureViewResolvers</span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">ViewResolverRegistry</span><span> registry</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:#DD4A68">TilesViewResolver</span><span> viewResolver </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">new</span><span> </span><span class="token" style="color:#DD4A68">TilesViewResolver</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>        registry</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">viewResolver</span><span class="token" style="color:#999">(</span><span>viewResolver</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<span>    </span><span class="token annotation" style="color:#999">@Bean</span><span>
</span><span>    </span><span class="token" style="color:#07a">public</span><span> </span><span class="token" style="color:#DD4A68">TilesConfigurer</span><span> </span><span class="token" style="color:#DD4A68">tilesConfigurer</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:#DD4A68">TilesConfigurer</span><span> tilesConfigurer </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">new</span><span> </span><span class="token" style="color:#DD4A68">TilesConfigurer</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>        tilesConfigurer</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">setDefinitions</span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">new</span><span> </span><span class="token" style="color:#DD4A68">String</span><span class="token" style="color:#999">[</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">{</span><span>
</span><span>            </span><span class="token" style="color:#690">&quot;/WEB-INF/layouts/**/*.tiles.xml&quot;</span><span class="token" style="color:#999">,</span><span>
</span><span>            </span><span class="token" style="color:#690">&quot;/WEB-INF/views/**/*.tiles.xml&quot;</span><span>
</span><span>        </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>        tilesConfigurer</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">setCheckRefresh</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>        </span><span class="token" style="color:#07a">return</span><span> tilesConfigurer</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre>
<p>ì—¬ëŸ¬ ë§ì€ íƒ€ì¼ë“¤ì´ ì •ì˜ë˜ì–´ ìˆì§€ë§Œ ê°€ì¥ í•µì‹¬ìœ¼ë¡œ ë³´ì´ëŠ” ë ˆì´ì•„ì›ƒ êµ¬ì„±ì€ ì•„ë˜ ì½”ë“œì…ë‹ˆë‹¤.</p>
<pre><div style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-html" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">&lt;!--page.layout.jsp--&gt;</span><span>
</span><span></span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">html</span><span class="token" style="color:#905"> </span><span class="token" style="color:#690">lang</span><span class="token attr-equals" style="color:#999">=</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#07a">ko</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#999">&gt;</span><span>
</span><span></span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">head</span><span class="token" style="color:#999">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">title</span><span class="token" style="color:#999">&gt;</span><span class="token" style="color:#999">&lt;/</span><span class="token" style="color:#905">title</span><span class="token" style="color:#999">&gt;</span><span>
</span><span>    </span><span class="token" style="color:slategray">&lt;!--....--&gt;</span><span>
</span><span></span><span class="token" style="color:#999">&lt;/</span><span class="token" style="color:#905">head</span><span class="token" style="color:#999">&gt;</span><span>
</span><span></span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">body</span><span class="token" style="color:#999">&gt;</span><span>
</span><span></span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">div</span><span class="token" style="color:#905"> </span><span class="token" style="color:#690">class</span><span class="token attr-equals" style="color:#999">=</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#07a">page-container</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#999">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">div</span><span class="token" style="color:#905"> </span><span class="token" style="color:#690">class</span><span class="token attr-equals" style="color:#999">=</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#07a">page-content</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#999">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905;-opacity:.7">tiles:</span><span class="token" style="color:#905">insertAttribute</span><span class="token" style="color:#905"> </span><span class="token" style="color:#690">name</span><span class="token attr-equals" style="color:#999">=</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#07a">leftmenu</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#999">/&gt;</span><span>
</span><span>        </span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">div</span><span class="token" style="color:#905"> </span><span class="token" style="color:#690">class</span><span class="token attr-equals" style="color:#999">=</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#07a">content-wrapper</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#999">&gt;</span><span>
</span><span>            </span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">div</span><span class="token" style="color:#905"> </span><span class="token" style="color:#690">class</span><span class="token attr-equals" style="color:#999">=</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#07a">content</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#999">&gt;</span><span>
</span><span>                </span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905;-opacity:.7">tiles:</span><span class="token" style="color:#905">insertAttribute</span><span class="token" style="color:#905"> </span><span class="token" style="color:#690">name</span><span class="token attr-equals" style="color:#999">=</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#07a">body</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#999">/&gt;</span><span>
</span><span>                </span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905;-opacity:.7">tiles:</span><span class="token" style="color:#905">insertAttribute</span><span class="token" style="color:#905"> </span><span class="token" style="color:#690">name</span><span class="token attr-equals" style="color:#999">=</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#07a">footer</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#999">/&gt;</span><span>
</span><span>            </span><span class="token" style="color:#999">&lt;/</span><span class="token" style="color:#905">div</span><span class="token" style="color:#999">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#999">&lt;/</span><span class="token" style="color:#905">div</span><span class="token" style="color:#999">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#999">&lt;/</span><span class="token" style="color:#905">div</span><span class="token" style="color:#999">&gt;</span><span>
</span><span></span><span class="token" style="color:#999">&lt;/</span><span class="token" style="color:#905">div</span><span class="token" style="color:#999">&gt;</span><span>
</span><span></span><span class="token" style="color:#999">&lt;/</span><span class="token" style="color:#905">body</span><span class="token" style="color:#999">&gt;</span><span>
</span><span></span><span class="token" style="color:#999">&lt;/</span><span class="token" style="color:#905">html</span><span class="token" style="color:#999">&gt;</span></code></div></pre>
<p>ë©”ì¸ í˜ì´ì§€ì˜ ë ˆì´ì•„ì›ƒì„ ì •ì˜í•œ ëª¨ìŠµì…ë‹ˆë‹¤. ì•„ì£¼ ê°„ë‹¨í•´ ë³´ì´ëŠ” HTML êµ¬ì„±ì´ë©°, body attribute ì— êµ¬í˜„í•œ ë ˆì´ì•„ì›ƒì„ ì‚½ì…í•  ìˆ˜ ìˆëŠ” ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤. ì´ êµ¬ì„±ì—
ë§ì¶° <code class="jsx-4eaf6378c4a9ee0a ">/WEB-INF/views/resource/resourcevermng</code> ë¼ëŠ” ë²„ì „ ê´€ë¦¬ í˜ì´ì§€ì˜ ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±í•´ì£¼ê³  <code class="jsx-4eaf6378c4a9ee0a ">views.tiles.xml</code> íŒŒì¼ì„ ìƒì„±í•˜ì—¬ ìƒˆë¡œ ë§Œë“¤ íƒ€ì¼ì˜ ì„¤ì •ì„ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.</p>
<pre><div style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-html" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>
</span><span></span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">tiles-definitions</span><span class="token" style="color:#999">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">definition</span><span class="token" style="color:#905"> </span><span class="token" style="color:#690">name</span><span class="token attr-equals" style="color:#999">=</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#07a">resource/resourcevermng/*</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#905"> </span><span class="token" style="color:#690">extends</span><span class="token attr-equals" style="color:#999">=</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#07a">page.layout</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#999">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">put-attribute</span><span class="token" style="color:#905"> </span><span class="token" style="color:#690">name</span><span class="token attr-equals" style="color:#999">=</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#07a">body</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#905"> </span><span class="token" style="color:#690">value</span><span class="token attr-equals" style="color:#999">=</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#07a">/WEB-INF/views/resource/resourcevermng/{1}.jsp</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#999">/&gt;</span><span>
</span><span>    </span><span class="token" style="color:#999">&lt;/</span><span class="token" style="color:#905">definition</span><span class="token" style="color:#999">&gt;</span><span>
</span><span></span><span class="token" style="color:#999">&lt;/</span><span class="token" style="color:#905">tiles-definitions</span><span class="token" style="color:#999">&gt;</span></code></div></pre>
<p><code class="jsx-4eaf6378c4a9ee0a ">resourcemng.jsp</code> íŒŒì¼ì„ ìƒì„±í•˜ì—¬ ì‹¤ì œ ëœë”ë§ ë  í˜ì´ì§€ì˜ í…œí”Œë¦¿ì„ ì •ì˜í•©ë‹ˆë‹¤. í˜ì´ì§€ë¥¼ êµ¬ì„±í•˜ëŠ” í”„ë ˆì„ì›Œí¬ëŠ” Vue.js ì´ë¯€ë¡œ Vue.js ì˜ í…œí”Œë¦¿ ë¬¸ë²•ì— ëŒ€í•œ ê¸°ì–µì„ ë”ë“¬ì–´ê°€ë©° ì½”ë”©í•˜ì˜€ìŠµë‹ˆë‹¤.
ì„¸ë¶€ ì½”ë“œëŠ” ìƒëµí•©ë‹ˆë‹¤.</p>
<pre><div style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-html" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>
</span><span></span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">div</span><span class="token" style="color:#905"> </span><span class="token" style="color:#690">id</span><span class="token attr-equals" style="color:#999">=</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#07a">rootVM</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#905"> </span><span class="token" style="color:#690">v-cloak</span><span class="token" style="color:#999">&gt;</span><span>
</span><span>    </span><span class="token" style="color:slategray">&lt;!--...--&gt;</span><span>
</span><span></span><span class="token" style="color:#999">&lt;/</span><span class="token" style="color:#905">div</span><span class="token" style="color:#999">&gt;</span><span>
</span>
<span></span><span class="token" style="color:#999">&lt;</span><span class="token" style="color:#905">script</span><span class="token" style="color:#905"> </span><span class="token" style="color:#690">type</span><span class="token attr-equals" style="color:#999">=</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#07a">text/javascript</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#905"> </span><span class="token" style="color:#690">src</span><span class="token attr-equals" style="color:#999">=</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#07a">${contextPath}/app/resource/resourcevermng/resourcevermng.js</span><span class="token" style="color:#999">&quot;</span><span class="token" style="color:#999">/&gt;</span></code></div></pre>
<p>ìµœì´ˆ í”„ë¡œì íŠ¸ë¥¼ êµ¬í˜„í•œ ë¶„ì˜ ì˜ë„ë¥¼ ì •í™•íˆ íŒŒì•…í•  ìˆ˜ëŠ” ì—†ìœ¼ë‚˜, í•œ íŒŒì¼ì— template ê³¼ script ì½”ë“œê°€ ëª¨ë‘ ë‹¤ ë“¤ì–´ê°€ ê°€ë…ì„±ì„ í•´ì¹˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•¨ì´ ì•„ë‹ˆì—ˆì„ê¹Œ ìƒê°ë©ë‹ˆë‹¤. <code class="jsx-4eaf6378c4a9ee0a ">contextPath</code>
ëŠ” constant ì „ì—­ ë³€ìˆ˜ë¡œì¨ <code class="jsx-4eaf6378c4a9ee0a ">/src/resources/static</code> ì…ë‹ˆë‹¤.</p>
<p><code class="jsx-4eaf6378c4a9ee0a ">src</code> attribute ì— ì •ì˜ëœ íŒŒì¼ì„ ìƒì„±í•˜ê³  ì½”ë“œë¥¼ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤. ì„¸ë¶€ ì½”ë“œëŠ” ìƒëµí•©ë‹ˆë‹¤.</p>
<pre><div style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-js" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">const</span><span> rootVM </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">new</span><span> </span><span class="token" style="color:#DD4A68">Vue</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token literal-property" style="color:#905">name</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;RootVM&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token literal-property" style="color:#905">el</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;#rootVM&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">created</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token literal-property" style="color:#905">data</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token literal-property" style="color:#905">computed</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token literal-property" style="color:#905">methods</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span></code></div></pre>
<p>í˜ì´ì§€ ë ˆì´ ì•„ì›ƒì˜ êµ¬ì„±ì„ ë§ˆì³¤ìœ¼ë‹ˆ ì´ì œ Resolver ê°€ <code class="jsx-4eaf6378c4a9ee0a ">resource/resourcevermng/*</code> ì´ë¦„ì˜ íƒ€ì¼ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë„ë¡ ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.</p>
<pre><div style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-java" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>
</span><span></span><span class="token annotation" style="color:#999">@Controller</span><span>
</span><span></span><span class="token annotation" style="color:#999">@RequestMapping</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;/resource/resourcevermng&quot;</span><span class="token" style="color:#999">)</span><span>
</span><span></span><span class="token" style="color:#07a">public</span><span> </span><span class="token" style="color:#07a">class</span><span> </span><span class="token" style="color:#DD4A68">ResourceVersionManageController</span><span> </span><span class="token" style="color:#999">{</span><span>
</span>
<span>    </span><span class="token annotation" style="color:#999">@GetMappging</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;/&quot;</span><span class="token" style="color:#999">)</span><span>
</span><span>    </span><span class="token" style="color:#07a">public</span><span> </span><span class="token" style="color:#DD4A68">String</span><span> </span><span class="token" style="color:#DD4A68">index</span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">Model</span><span> model</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:slategray">// model.addAttribute()  í•„ìš”í•œ ë°ì´í„°ë¥¼ ë³´ë‚´ì¤ë‹ˆë‹¤.</span><span>
</span><span>        </span><span class="token" style="color:#07a">return</span><span> </span><span class="token" style="color:#690">&quot;/resource/resourcevermng/resourcevermng&quot;</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre>
<hr/>
<h3>QueryDSL</h3>
<p>ìš”êµ¬ë˜ëŠ” í˜ì´ì§€ ê¸°ëŠ¥ ìƒ ì¿¼ë¦¬ê°€ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— ê·¸ì— ê´€ë ¨ ëœ êµ¬ì¡° ë˜í•œ íŒŒì•…í•  í•„ìš”ê°€ ìˆì—ˆìŠµë‹ˆë‹¤. Spring ì˜ ORM ìŠ¤í™ ì¤‘ í•˜ë‚˜ì¸ <code class="jsx-4eaf6378c4a9ee0a ">QueryDSL</code>
ì„ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë¶€ë¶„ í•„í„°ë§ ê¸°ëŠ¥ì„ êµ¬í˜„í•´ì•¼ í•˜ëŠ” ì–´ë“œë¯¼ í˜ì´ì§€ì´ì—ˆê¸° ë•Œë¬¸ì— <code class="jsx-4eaf6378c4a9ee0a ">QueryDSL</code> ì±„íƒì€ ì•„ì£¼ í•©ë¦¬ì ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.</p>
<p>ì‹¤ì œ êµ¬í˜„í•œ ì½”ë“œë¥¼ ì˜ˆì‹œë¡œ ë“¤ë©° ì„¤ëª…í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<p><img src="/images/ota/1.png" alt="ota_resource_vermng"/></p>
<p>í™”ë©´ì— ë³´ì´ë“¯ ì´ 7ê°œì˜ ê²€ìƒ‰ í•„ë“œê°€ ì¡´ì¬í•˜ëŠ”ë° 7ê°œì˜ í•„ë“œë¥¼ ëª¨ë‘ ë‹¤ ì±„ì›Œ ê²€ìƒ‰í•´ì•¼ í•œë‹¤ë©´ ì‚¬ìš©ì„±ì´ ë§¤ìš° ë–¨ì–´ì§€ë‹ˆ ë‹¹ì—°íˆ ì¼ë¶€ í•„ë“œë§Œ ì±„ì›Œ ê²€ìƒ‰í•˜ë”ë¼ë„ í•„í„°ê°€ ì ìš©ëœ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ë³´ì—¬ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ JPA ì˜
ì¼ë°˜ì ì¸ ì¿¼ë¦¬ ë©”ì„œë“œë¡œ êµ¬í˜„í•œë‹¤ê³  í•˜ë©´ ì´ í•œ ê¸°ëŠ¥ì„ ìœ„í•´ ìˆ˜ë„ ì—†ì´ ë§ì€ ë©”ì„œë“œë¥¼ ì •ì˜í•´ì•¼ í–ˆì„ ê²ƒì…ë‹ˆë‹¤.</p>
<pre><div style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-java" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// ì‹¤ì œ ì½”ë“œê°€ ì•„ë‹Œ ì˜ˆì‹œì…ë‹ˆë‹¤.</span><span>
</span>
<span></span><span class="token annotation" style="color:#999">@Repository</span><span>
</span><span></span><span class="token" style="color:#07a">public</span><span> </span><span class="token" style="color:#07a">interface</span><span> </span><span class="token" style="color:#DD4A68">ResourceVersionRepository</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token" style="color:#DD4A68">JpaRepository</span><span class="token generics" style="color:#999">&lt;</span><span class="token generics" style="color:#DD4A68">ResourceVersion</span><span class="token generics" style="color:#999">,</span><span class="token generics"> </span><span class="token generics" style="color:#DD4A68">Long</span><span class="token generics" style="color:#999">&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">List</span><span class="token generics" style="color:#999">&lt;</span><span class="token generics" style="color:#DD4A68">ResourceVersion</span><span class="token generics" style="color:#999">&gt;</span><span> </span><span class="token" style="color:#DD4A68">findByModelName</span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">String</span><span> modelName</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token" style="color:#DD4A68">List</span><span class="token generics" style="color:#999">&lt;</span><span class="token generics" style="color:#DD4A68">ResourceVersion</span><span class="token generics" style="color:#999">&gt;</span><span> </span><span class="token" style="color:#DD4A68">findByModelNameAndModelType</span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">String</span><span> modelName</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#DD4A68">String</span><span> modelType</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token" style="color:#DD4A68">List</span><span class="token generics" style="color:#999">&lt;</span><span class="token generics" style="color:#DD4A68">ResourceVersion</span><span class="token generics" style="color:#999">&gt;</span><span> </span><span class="token" style="color:#DD4A68">findByModelNameAndModelTypeAndVersion</span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">String</span><span> modelName</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#DD4A68">String</span><span> modelType</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#DD4A68">String</span><span> version</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:slategray">// .....ìˆ˜ì‹­ê°œì˜ method T_T</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre>
<p>ì´ëŸ° ìƒí™©ì—ì„œëŠ” ë™ì  ì¿¼ë¦¬ê°€ ì‘ì„± ê°€ëŠ¥í•œ ë°©ë²•ì„ ì°¾ì•„ì•¼ í•˜ëŠ”ë° <code class="jsx-4eaf6378c4a9ee0a ">QueryDSL</code> ì€ ì´ë¥¼ í•´ê²°í•´ì¤„ JPQL ë¹Œë”ì…ë‹ˆë‹¤.</p>
<p>ê¸°ì¡´ ì„¤ì •ì´ ì´ë¯¸ ì™„ë£Œë˜ì–´ ìˆê³  ì»´íŒŒì¼ ì‹œ <code class="jsx-4eaf6378c4a9ee0a ">/target/generated-sources/java/{package}/entity</code> ì•„ë˜ QModel ë“¤ì´ ìƒì„±ë˜ëŠ” ê²ƒì„ í™•ì¸í•˜ì˜€ìœ¼ë‹ˆ ì¶”ê°€ëœ í…Œì´ë¸”ì„ ì •ì˜í•©ë‹ˆë‹¤. ì‹¤ì œ
ì½”ë“œì™€ëŠ” ë‹¤ë¥¸ ì˜ˆì‹œì…ë‹ˆë‹¤.</p>
<pre><div style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-java" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>
</span><span></span><span class="token annotation" style="color:#999">@Entity</span><span>
</span><span></span><span class="token annotation" style="color:#999">@Getter</span><span>
</span><span></span><span class="token annotation" style="color:#999">@Setter</span><span>
</span><span></span><span class="token annotation" style="color:#999">@Table</span><span class="token" style="color:#999">(</span><span>name </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">&quot;tbl_resource_version&quot;</span><span class="token" style="color:#999">)</span><span>
</span><span></span><span class="token" style="color:#07a">public</span><span> </span><span class="token" style="color:#07a">class</span><span> </span><span class="token" style="color:#DD4A68">ResourceVersion</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token annotation" style="color:#999">@Id</span><span>
</span><span>    </span><span class="token annotation" style="color:#999">@GeneratedValue</span><span class="token" style="color:#999">(</span><span>strategy </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">GenerationType</span><span class="token" style="color:#999">.</span><span>IDENTITY</span><span class="token" style="color:#999">)</span><span>
</span><span>    </span><span class="token annotation" style="color:#999">@Column</span><span class="token" style="color:#999">(</span><span>columnDefinition </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">&quot;int&quot;</span><span class="token" style="color:#999">)</span><span>
</span><span>    </span><span class="token" style="color:#07a">private</span><span> </span><span class="token" style="color:#DD4A68">Long</span><span> seqno</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token annotation" style="color:#999">@ManyToOne</span><span class="token" style="color:#999">(</span><span>fetch </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">FetchType</span><span class="token" style="color:#999">.</span><span>LAZY</span><span class="token" style="color:#999">)</span><span>
</span><span>    </span><span class="token annotation" style="color:#999">@JoinColumn</span><span class="token" style="color:#999">(</span><span>name </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">&quot;modelSeqno&quot;</span><span class="token" style="color:#999">)</span><span>
</span><span>    </span><span class="token" style="color:#07a">private</span><span> </span><span class="token" style="color:#DD4A68">ResourceModel</span><span> model</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token" style="color:#07a">private</span><span> </span><span class="token" style="color:#DD4A68">String</span><span> version</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token" style="color:#07a">private</span><span> </span><span class="token" style="color:#DD4A68">String</span><span> registerAdmin</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token" style="color:#07a">private</span><span> </span><span class="token" style="color:#DD4A68">String</span><span> updateAdmin</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token annotation" style="color:#999">@Column</span><span class="token" style="color:#999">(</span><span>columnDefinition </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">&quot;int&quot;</span><span class="token" style="color:#999">)</span><span>
</span><span>    </span><span class="token" style="color:#07a">private</span><span> </span><span class="token" style="color:#DD4A68">Long</span><span> registerTs</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token annotation" style="color:#999">@Column</span><span class="token" style="color:#999">(</span><span>columnDefinition </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">&quot;int&quot;</span><span class="token" style="color:#999">)</span><span>
</span><span>    </span><span class="token" style="color:#07a">private</span><span> </span><span class="token" style="color:#DD4A68">Long</span><span> updateTs</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre>
<p>ì´ í›„ ë‹¤ì‹œ ì»´íŒŒì¼í•˜ë©´ <code class="jsx-4eaf6378c4a9ee0a ">QResourceVersion</code> ì´ë¼ëŠ” ìƒˆë¡œìš´ QModel ì´ ìƒì„±ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre><div style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-java" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>
</span><span></span><span class="token annotation" style="color:#999">@Generated</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;com.querydsl.codegen.EntitySerializer&quot;</span><span class="token" style="color:#999">)</span><span>
</span><span></span><span class="token" style="color:#07a">public</span><span> </span><span class="token" style="color:#07a">class</span><span> </span><span class="token" style="color:#DD4A68">QResourceVersion</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token" style="color:#DD4A68">EntityPathBase</span><span class="token generics" style="color:#999">&lt;</span><span class="token generics" style="color:#DD4A68">ResourceVersion</span><span class="token generics" style="color:#999">&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:slategray">//...</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre>
<p>ë™ì  ì¿¼ë¦¬ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤. ì—­ì‹œ ì‹¤ì œ ì½”ë“œì™€ ë‹¤ë¥¸ ì˜ˆì‹œì…ë‹ˆë‹¤.</p>
<pre><div style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-java" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>
</span><span></span><span class="token annotation" style="color:#999">@Repository</span><span>
</span><span></span><span class="token" style="color:#07a">public</span><span> </span><span class="token" style="color:#07a">class</span><span> </span><span class="token" style="color:#DD4A68">ResourceVersionRepository</span><span> </span><span class="token" style="color:#999">{</span><span>
</span>
<span>    </span><span class="token annotation" style="color:#999">@Autowired</span><span>
</span><span>    </span><span class="token" style="color:#07a">private</span><span> </span><span class="token" style="color:#DD4A68">JPAQueryFactory</span><span> queryFactory</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray">     * SearchMap ì€ ServletRequest ë¥¼ HashMap</span><span class="token doc-comment" style="color:#999">&lt;</span><span class="token doc-comment" style="color:#905">String,</span><span class="token doc-comment" style="color:#905"> </span><span class="token doc-comment" style="color:#690">Object</span><span class="token doc-comment" style="color:#999">&gt;</span><span class="token doc-comment" style="color:slategray"> ì˜ í˜•íƒœë¡œ ë³€í™˜ì‹œí‚¨ ê°ì²´ì…ë‹ˆë‹¤.
</span><span class="token doc-comment" style="color:slategray">     */</span><span>
</span><span>    </span><span class="token" style="color:#07a">public</span><span> </span><span class="token" style="color:#DD4A68">QueryResults</span><span class="token generics" style="color:#999">&lt;</span><span class="token generics" style="color:#DD4A68">Tuple</span><span class="token generics" style="color:#999">&gt;</span><span> </span><span class="token" style="color:#DD4A68">queryVersionList</span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">SearchMap</span><span> map</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#DD4A68">Sort</span><span> sort</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:#DD4A68">BooleanBuilder</span><span> filter </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">new</span><span> </span><span class="token" style="color:#DD4A68">BooleanBuilder</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>        </span><span class="token" style="color:#DD4A68">QResourceVersion</span><span> v </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">new</span><span> </span><span class="token" style="color:#DD4A68">QResourceVersion</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;v&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>        </span><span class="token" style="color:#DD4A68">QResourceModel</span><span> m </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">new</span><span> </span><span class="token" style="color:#DD4A68">QResourceModel</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;m&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>        </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>map </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">!=</span><span> </span><span class="token" style="color:#07a">null</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>            </span><span class="token" style="color:#DD4A68">String</span><span> modelName </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">String</span><span class="token" style="color:#999">)</span><span> map</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">get</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;modelName&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>            </span><span class="token" style="color:#DD4A68">String</span><span> modelType </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">String</span><span class="token" style="color:#999">)</span><span> map</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">get</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;modelType&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>            </span><span class="token" style="color:#DD4A68">String</span><span> version </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">String</span><span class="token" style="color:#999">)</span><span> map</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">get</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;version&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>            </span><span class="token" style="color:slategray">// ë™ì  ì¿¼ë¦¬ ì¡°ê±´ë¬¸ ì¶”ê°€ </span><span>
</span><span>            </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>modelName </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">!=</span><span> </span><span class="token" style="color:#07a">null</span><span class="token" style="color:#999">)</span><span> filter</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">and</span><span class="token" style="color:#999">(</span><span>m</span><span class="token" style="color:#999">.</span><span>modelName</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">eq</span><span class="token" style="color:#999">(</span><span>modelName</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>            </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>modelType </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">!=</span><span> </span><span class="token" style="color:#07a">null</span><span class="token" style="color:#999">)</span><span> filter</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">and</span><span class="token" style="color:#999">(</span><span>m</span><span class="token" style="color:#999">.</span><span>modelType</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">eq</span><span class="token" style="color:#999">(</span><span>modelType</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>            </span><span class="token" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>version </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">!=</span><span> </span><span class="token" style="color:#07a">null</span><span class="token" style="color:#999">)</span><span> filter</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">and</span><span class="token" style="color:#999">(</span><span>v</span><span class="token" style="color:#999">.</span><span>version</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">eq</span><span class="token" style="color:#999">(</span><span>version</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>            </span><span class="token" style="color:slategray">// ì¿¼ë¦¬ ì‹¤í–‰</span><span>
</span><span>            </span><span class="token" style="color:#DD4A68">JPAQuery</span><span class="token generics" style="color:#999">&lt;</span><span class="token generics" style="color:#DD4A68">Tuple</span><span class="token generics" style="color:#999">&gt;</span><span> query </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> queryFactory
</span><span>                </span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">select</span><span class="token" style="color:#999">(</span><span>m</span><span class="token" style="color:#999">.</span><span>modelName</span><span class="token" style="color:#999">,</span><span> m</span><span class="token" style="color:#999">.</span><span>modelType</span><span class="token" style="color:#999">,</span><span> v</span><span class="token" style="color:#999">.</span><span>version</span><span class="token" style="color:#999">)</span><span>
</span><span>                </span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">from</span><span class="token" style="color:#999">(</span><span>v</span><span class="token" style="color:#999">)</span><span>
</span><span>                </span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">leftJoin</span><span class="token" style="color:#999">(</span><span>v</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">model</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">,</span><span> m</span><span class="token" style="color:#999">)</span><span>
</span><span>                </span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">where</span><span class="token" style="color:#999">(</span><span>filter</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>            </span><span class="token" style="color:#07a">return</span><span> query</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">fetResults</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>        </span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#07a">else</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>            </span><span class="token" style="color:slategray">// í•„í„° ì—†ì´ ì „ì²´ ê²€ìƒ‰...</span><span>
</span><span>        </span><span class="token" style="color:#999">}</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre>
<p>ì´ í›„ <code class="jsx-4eaf6378c4a9ee0a ">QueryResults&lt;Tuple&gt;</code> í˜•íƒœì˜ ê²°ê³¼ê°’ì€ DTO í˜•íƒœë¡œ ë³€í™˜í•˜ì—¬ í˜ì´ì§€ì— ì „ë‹¬í•˜ë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<hr/>
<h2>AWS S3 ì— ë°”ì´ë„ˆë¦¬ ì—…ë¡œë“œ</h2>
<p>JavaScript ìš© AWS SDK ê°€
ìˆìŠµë‹ˆë‹¤. <a href="https://docs.aws.amazon.com/ko_kr/sdk-for-javascript/v2/developer-guide/welcome.html">ê³µì‹ ë¬¸ì„œ</a> ë¥¼ ì°¸ê³ í•˜ì—¬ AWS S3 ì— ì—…ë¡œë“œê°€
ê°€ëŠ¥í•˜ë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<p>ì•ë‹¨ì€ ì—„ë°€íˆ ë”°ì§€ìë©´ Node.js í”„ë¡œì íŠ¸ê°€ ì•„ë‹ˆë¯€ë¡œ ë¸Œë¼ìš°ì € ìŠ¤í¬ë¦½íŠ¸ë¡œ SDK ë¥¼ í¬í•¨ì‹œì¼œì•¼ í–ˆìŠµë‹ˆë‹¤.</p>
<pre><div style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-html" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">&lt;!--resourcevermng.jsp--&gt;</span><span>
</span>
<span></span><span class="token" style="color:slategray">&lt;!-- ..... --&gt;</span><span>
</span><span>&lt;script src=&quot;https://sdk.amazonaws.com/js/aws-sdk-2.1254.0.min.js&gt;</span><span class="token" style="color:#999">&lt;/</span><span class="token" style="color:#905">script</span><span class="token" style="color:#999">&gt;</span></code></div></pre>
<p>AWS ì ‘ê·¼ ê¶Œí•œì„ ë¶€ì—¬í•˜ê¸°
ìœ„í•´ <a href="https://docs.aws.amazon.com/ko_kr/sdk-for-javascript/v2/developer-guide/getting-started-browser.html">ê³µì‹ ë¬¸ì„œ</a> ì˜ 1ë‹¨ê³„,
2ë‹¨ê³„ ë‚´ìš©ì„ ì°¸ê³ í•˜ì—¬ CognitoIdentity Pool ì„ ìƒì„±í•˜ê³  ì •ì±…ì„ ë¶€ì—¬í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ í›„ ê¶Œí•œì„ ê°€ì§„ Pool ID ë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ í¬í•¨ì‹œí‚¨ SDK ë¥¼ í™•ì¥í•©ë‹ˆë‹¤.</p>
<p>ë§ˆì§€ë§‰ìœ¼ë¡œ ì—­ì‹œ ê³µì‹ ë¬¸ì„œë¥¼ ì°¸ì¡°í•˜ì—¬ í˜ì´ì§€ì—ì„œ ì „ë‹¬ë°›ì€ ë°”ì´ë„ˆë¦¬ íŒŒì¼ì„ AWS S3ì— ì—…ë¡œë“œ í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<pre><div style="color:black;background:#f5f2f0;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-js" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">async</span><span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">uploadFileToS3</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:slategray">// ...v-model &gt; closure. file ì— ê´€í•œ ì •ë³´ë¥¼ ê°€ì ¸ì˜´</span><span>
</span>    
<span>    </span><span class="token" style="color:#07a">var</span><span> credentials </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">new</span><span> </span><span class="token" style="color:#DD4A68">AWS</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">CognitoIdentityCredentials</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token literal-property" style="color:#905">IdentityPoolId</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;ap-northeast-2:key...&#x27;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#905">AWS</span><span class="token" style="color:#999">.</span><span class="token property-access">config</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">update</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token literal-property" style="color:#905">region</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;ap-northeast-2&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>        credentials</span><span class="token" style="color:#999">,</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#07a">let</span><span> s3 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">new</span><span> </span><span class="token" style="color:#DD4A68">AWS</span><span class="token" style="color:#999">.</span><span class="token" style="color:#DD4A68">s3</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token literal-property" style="color:#905">computeChecksums</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">true</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#07a">let</span><span> body </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token literal-property" style="color:#905">Bucket</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;bucket-name&#x27;</span><span class="token" style="color:#999">,</span><span>
</span><span>        </span><span class="token literal-property" style="color:#905">Body</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> file</span><span class="token" style="color:#999">,</span><span>
</span><span>        </span><span class="token literal-property" style="color:#905">Key</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> fileName
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span>    </span><span class="token" style="color:#07a">const</span><span> putResult </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token control-flow" style="color:#07a">await</span><span> s3</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">putObject</span><span class="token" style="color:#999">(</span><span>body</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">promise</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span></code></div></pre></section></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":1,"title":"ê´€ë¦¬ì í˜ì´ì§€ - ë²„ì „ ë“±ë¡ í˜ì´ì§€ ê°œë°œ","date":"2022-12-17","tag":["Spring Boot","Spring JPA","Spring Web","QueryDSL","Vue.js"],"content":"\n- ê¸°ê°„: 2022. 11 ~ 2022. 12, ì•½ 2ê°œì›”\n- ì£¼ìš” ì—…ë¬´: ì½”ë§¥ìŠ¤ í´ë¼ìš°ë“œ 2.0 ì–´ë“œë¯¼ í˜ì´ì§€ ë‚´ ë¦¬ì†ŒìŠ¤ ë²„ì „ ë“±ë¡ í˜ì´ì§€ ê°œë°œ\n- ì—…ë¬´ ëª©ì : ì‹¤ì œ ìœ í†µëœ ë¦¬ì†ŒìŠ¤(ì›”íŒ¨ë“œ, ë¡œë¹„í° ë“±) ë‚´ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë²„ì „ ë“±ë¡/ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•œ í˜ì´ì§€ ê°œë°œ\n- ê°œë°œ ì¸ì›: 1ì¸\n- í”„ë¡œì íŠ¸ ìŠ¤í™\n    - Spring Boot\n    - Spring Web MVC\n    - Spring Security\n    - QueryDSL\n    - Vue.js\n\nê¸°ì¡´ ì½”ë§¥ìŠ¤ í´ë¼ìš°ë“œ 2.0 ì˜ ê´€ë¦¬ì í˜ì´ì§€ì— OTA(Over The Air) ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ëŠ” ê°œë°œ ê±´ì˜\nì—¬ëŸ¬ ìš”êµ¬ì‚¬í•­ ì¤‘ ì‹ ê·œ ë²„ì „ ë“±ë¡ì„ ìœ„í•œ í˜ì´ì§€ë¥¼ ê°œë°œí•˜ëŠ” ì—…ë¬´ë¥¼ ë‹´ë‹¹í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.\n\n---\n\n## í”„ë¡œì íŠ¸ êµ¬ì¡° ë¶„ì„\n\nê¸°ë³¸ì ìœ¼ë¡œ Spring Web MVC í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•œ í”„ë¡œì íŠ¸ë¡œ Apache Tiles ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬\níƒ€ì¼ ê¸°ë°˜ì˜ ë ˆì´ì•„ì›ƒì„ êµ¬í˜„í•œ ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.\n\n```java\n\n@Configuration\npublic class WebMvcConfig implements WebMvcConfigurer {\n    public void configureViewResolvers(ViewResolverRegistry registry) {\n        TilesViewResolver viewResolver = new TilesViewResolver();\n        registry.viewResolver(viewResolver);\n    }\n\n    @Bean\n    public TilesConfigurer tilesConfigurer() {\n        TilesConfigurer tilesConfigurer = new TilesConfigurer();\n        tilesConfigurer.setDefinitions(new String[]{\n            \"/WEB-INF/layouts/**/*.tiles.xml\",\n            \"/WEB-INF/views/**/*.tiles.xml\"\n        });\n        tilesConfigurer.setCheckRefresh(true);\n        return tilesConfigurer;\n    }\n}\n```\n\nì—¬ëŸ¬ ë§ì€ íƒ€ì¼ë“¤ì´ ì •ì˜ë˜ì–´ ìˆì§€ë§Œ ê°€ì¥ í•µì‹¬ìœ¼ë¡œ ë³´ì´ëŠ” ë ˆì´ì•„ì›ƒ êµ¬ì„±ì€ ì•„ë˜ ì½”ë“œì…ë‹ˆë‹¤.\n\n```html\n\u003c!--page.layout.jsp--\u003e\n\u003chtml lang=\"ko\"\u003e\n\u003chead\u003e\n    \u003ctitle\u003e\u003c/title\u003e\n    \u003c!--....--\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cdiv class=\"page-container\"\u003e\n    \u003cdiv class=\"page-content\"\u003e\n        \u003ctiles:insertAttribute name=\"leftmenu\"/\u003e\n        \u003cdiv class=\"content-wrapper\"\u003e\n            \u003cdiv class=\"content\"\u003e\n                \u003ctiles:insertAttribute name=\"body\"/\u003e\n                \u003ctiles:insertAttribute name=\"footer\"/\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/div\u003e\n\u003c/div\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n```\n\në©”ì¸ í˜ì´ì§€ì˜ ë ˆì´ì•„ì›ƒì„ ì •ì˜í•œ ëª¨ìŠµì…ë‹ˆë‹¤. ì•„ì£¼ ê°„ë‹¨í•´ ë³´ì´ëŠ” HTML êµ¬ì„±ì´ë©°, body attribute ì— êµ¬í˜„í•œ ë ˆì´ì•„ì›ƒì„ ì‚½ì…í•  ìˆ˜ ìˆëŠ” ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤. ì´ êµ¬ì„±ì—\në§ì¶° `/WEB-INF/views/resource/resourcevermng` ë¼ëŠ” ë²„ì „ ê´€ë¦¬ í˜ì´ì§€ì˜ ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±í•´ì£¼ê³  `views.tiles.xml` íŒŒì¼ì„ ìƒì„±í•˜ì—¬ ìƒˆë¡œ ë§Œë“¤ íƒ€ì¼ì˜ ì„¤ì •ì„ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.\n\n```html\n\n\u003ctiles-definitions\u003e\n    \u003cdefinition name=\"resource/resourcevermng/*\" extends=\"page.layout\"\u003e\n        \u003cput-attribute name=\"body\" value=\"/WEB-INF/views/resource/resourcevermng/{1}.jsp\"/\u003e\n    \u003c/definition\u003e\n\u003c/tiles-definitions\u003e\n```\n\n`resourcemng.jsp` íŒŒì¼ì„ ìƒì„±í•˜ì—¬ ì‹¤ì œ ëœë”ë§ ë  í˜ì´ì§€ì˜ í…œí”Œë¦¿ì„ ì •ì˜í•©ë‹ˆë‹¤. í˜ì´ì§€ë¥¼ êµ¬ì„±í•˜ëŠ” í”„ë ˆì„ì›Œí¬ëŠ” Vue.js ì´ë¯€ë¡œ Vue.js ì˜ í…œí”Œë¦¿ ë¬¸ë²•ì— ëŒ€í•œ ê¸°ì–µì„ ë”ë“¬ì–´ê°€ë©° ì½”ë”©í•˜ì˜€ìŠµë‹ˆë‹¤.\nì„¸ë¶€ ì½”ë“œëŠ” ìƒëµí•©ë‹ˆë‹¤.\n\n```html\n\n\u003cdiv id=\"rootVM\" v-cloak\u003e\n    \u003c!--...--\u003e\n\u003c/div\u003e\n\n\u003cscript type=\"text/javascript\" src=\"${contextPath}/app/resource/resourcevermng/resourcevermng.js\"/\u003e\n```\n\nìµœì´ˆ í”„ë¡œì íŠ¸ë¥¼ êµ¬í˜„í•œ ë¶„ì˜ ì˜ë„ë¥¼ ì •í™•íˆ íŒŒì•…í•  ìˆ˜ëŠ” ì—†ìœ¼ë‚˜, í•œ íŒŒì¼ì— template ê³¼ script ì½”ë“œê°€ ëª¨ë‘ ë‹¤ ë“¤ì–´ê°€ ê°€ë…ì„±ì„ í•´ì¹˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•¨ì´ ì•„ë‹ˆì—ˆì„ê¹Œ ìƒê°ë©ë‹ˆë‹¤. `contextPath`\nëŠ” constant ì „ì—­ ë³€ìˆ˜ë¡œì¨ `/src/resources/static` ì…ë‹ˆë‹¤.\n\n`src` attribute ì— ì •ì˜ëœ íŒŒì¼ì„ ìƒì„±í•˜ê³  ì½”ë“œë¥¼ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤. ì„¸ë¶€ ì½”ë“œëŠ” ìƒëµí•©ë‹ˆë‹¤.\n\n```js\nconst rootVM = new Vue({\n    name: 'RootVM',\n    el: '#rootVM',\n    created() {\n    },\n    data: {},\n    computed: {},\n    methods: {}\n})\n```\n\ní˜ì´ì§€ ë ˆì´ ì•„ì›ƒì˜ êµ¬ì„±ì„ ë§ˆì³¤ìœ¼ë‹ˆ ì´ì œ Resolver ê°€ `resource/resourcevermng/*` ì´ë¦„ì˜ íƒ€ì¼ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë„ë¡ ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.\n\n```java\n\n@Controller\n@RequestMapping(\"/resource/resourcevermng\")\npublic class ResourceVersionManageController {\n\n    @GetMappging(\"/\")\n    public String index(Model model) {\n        // model.addAttribute()  í•„ìš”í•œ ë°ì´í„°ë¥¼ ë³´ë‚´ì¤ë‹ˆë‹¤.\n        return \"/resource/resourcevermng/resourcevermng\";\n    }\n}\n```\n\n---\n\n### QueryDSL\n\nìš”êµ¬ë˜ëŠ” í˜ì´ì§€ ê¸°ëŠ¥ ìƒ ì¿¼ë¦¬ê°€ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— ê·¸ì— ê´€ë ¨ ëœ êµ¬ì¡° ë˜í•œ íŒŒì•…í•  í•„ìš”ê°€ ìˆì—ˆìŠµë‹ˆë‹¤. Spring ì˜ ORM ìŠ¤í™ ì¤‘ í•˜ë‚˜ì¸ `QueryDSL`\nì„ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë¶€ë¶„ í•„í„°ë§ ê¸°ëŠ¥ì„ êµ¬í˜„í•´ì•¼ í•˜ëŠ” ì–´ë“œë¯¼ í˜ì´ì§€ì´ì—ˆê¸° ë•Œë¬¸ì— `QueryDSL` ì±„íƒì€ ì•„ì£¼ í•©ë¦¬ì ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.\n\nì‹¤ì œ êµ¬í˜„í•œ ì½”ë“œë¥¼ ì˜ˆì‹œë¡œ ë“¤ë©° ì„¤ëª…í•´ë³´ê² ìŠµë‹ˆë‹¤.\n\n![ota_resource_vermng](/images/ota/1.png)\n\ní™”ë©´ì— ë³´ì´ë“¯ ì´ 7ê°œì˜ ê²€ìƒ‰ í•„ë“œê°€ ì¡´ì¬í•˜ëŠ”ë° 7ê°œì˜ í•„ë“œë¥¼ ëª¨ë‘ ë‹¤ ì±„ì›Œ ê²€ìƒ‰í•´ì•¼ í•œë‹¤ë©´ ì‚¬ìš©ì„±ì´ ë§¤ìš° ë–¨ì–´ì§€ë‹ˆ ë‹¹ì—°íˆ ì¼ë¶€ í•„ë“œë§Œ ì±„ì›Œ ê²€ìƒ‰í•˜ë”ë¼ë„ í•„í„°ê°€ ì ìš©ëœ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ë³´ì—¬ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ JPA ì˜\nì¼ë°˜ì ì¸ ì¿¼ë¦¬ ë©”ì„œë“œë¡œ êµ¬í˜„í•œë‹¤ê³  í•˜ë©´ ì´ í•œ ê¸°ëŠ¥ì„ ìœ„í•´ ìˆ˜ë„ ì—†ì´ ë§ì€ ë©”ì„œë“œë¥¼ ì •ì˜í•´ì•¼ í–ˆì„ ê²ƒì…ë‹ˆë‹¤.\n\n```java\n// ì‹¤ì œ ì½”ë“œê°€ ì•„ë‹Œ ì˜ˆì‹œì…ë‹ˆë‹¤.\n\n@Repository\npublic interface ResourceVersionRepository extends JpaRepository\u003cResourceVersion, Long\u003e {\n    List\u003cResourceVersion\u003e findByModelName(String modelName);\n\n    List\u003cResourceVersion\u003e findByModelNameAndModelType(String modelName, String modelType);\n\n    List\u003cResourceVersion\u003e findByModelNameAndModelTypeAndVersion(String modelName, String modelType, String version);\n    // .....ìˆ˜ì‹­ê°œì˜ method T_T\n}\n```\n\nì´ëŸ° ìƒí™©ì—ì„œëŠ” ë™ì  ì¿¼ë¦¬ê°€ ì‘ì„± ê°€ëŠ¥í•œ ë°©ë²•ì„ ì°¾ì•„ì•¼ í•˜ëŠ”ë° `QueryDSL` ì€ ì´ë¥¼ í•´ê²°í•´ì¤„ JPQL ë¹Œë”ì…ë‹ˆë‹¤.\n\nê¸°ì¡´ ì„¤ì •ì´ ì´ë¯¸ ì™„ë£Œë˜ì–´ ìˆê³  ì»´íŒŒì¼ ì‹œ `/target/generated-sources/java/{package}/entity` ì•„ë˜ QModel ë“¤ì´ ìƒì„±ë˜ëŠ” ê²ƒì„ í™•ì¸í•˜ì˜€ìœ¼ë‹ˆ ì¶”ê°€ëœ í…Œì´ë¸”ì„ ì •ì˜í•©ë‹ˆë‹¤. ì‹¤ì œ\nì½”ë“œì™€ëŠ” ë‹¤ë¥¸ ì˜ˆì‹œì…ë‹ˆë‹¤.\n\n```java\n\n@Entity\n@Getter\n@Setter\n@Table(name = \"tbl_resource_version\")\npublic class ResourceVersion {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(columnDefinition = \"int\")\n    private Long seqno;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = \"modelSeqno\")\n    private ResourceModel model;\n\n    private String version;\n\n    private String registerAdmin;\n\n    private String updateAdmin;\n\n    @Column(columnDefinition = \"int\")\n    private Long registerTs;\n\n    @Column(columnDefinition = \"int\")\n    private Long updateTs;\n}\n```\n\nì´ í›„ ë‹¤ì‹œ ì»´íŒŒì¼í•˜ë©´ `QResourceVersion` ì´ë¼ëŠ” ìƒˆë¡œìš´ QModel ì´ ìƒì„±ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```java\n\n@Generated(\"com.querydsl.codegen.EntitySerializer\")\npublic class QResourceVersion extends EntityPathBase\u003cResourceVersion\u003e {\n    //...\n}\n```\n\në™ì  ì¿¼ë¦¬ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤. ì—­ì‹œ ì‹¤ì œ ì½”ë“œì™€ ë‹¤ë¥¸ ì˜ˆì‹œì…ë‹ˆë‹¤.\n\n```java\n\n@Repository\npublic class ResourceVersionRepository {\n\n    @Autowired\n    private JPAQueryFactory queryFactory;\n\n    /**\n     * SearchMap ì€ ServletRequest ë¥¼ HashMap\u003cString, Object\u003e ì˜ í˜•íƒœë¡œ ë³€í™˜ì‹œí‚¨ ê°ì²´ì…ë‹ˆë‹¤.\n     */\n    public QueryResults\u003cTuple\u003e queryVersionList(SearchMap map, Sort sort) {\n        BooleanBuilder filter = new BooleanBuilder();\n        QResourceVersion v = new QResourceVersion(\"v\");\n        QResourceModel m = new QResourceModel(\"m\");\n\n        if (map != null) {\n            String modelName = (String) map.get(\"modelName\");\n            String modelType = (String) map.get(\"modelType\");\n            String version = (String) map.get(\"version\");\n\n            // ë™ì  ì¿¼ë¦¬ ì¡°ê±´ë¬¸ ì¶”ê°€ \n            if (modelName != null) filter.and(m.modelName.eq(modelName));\n            if (modelType != null) filter.and(m.modelType.eq(modelType));\n            if (version != null) filter.and(v.version.eq(version));\n\n            // ì¿¼ë¦¬ ì‹¤í–‰\n            JPAQuery\u003cTuple\u003e query = queryFactory\n                .select(m.modelName, m.modelType, v.version)\n                .from(v)\n                .leftJoin(v.model(), m)\n                .where(filter);\n\n            return query.fetResults();\n        } else {\n            // í•„í„° ì—†ì´ ì „ì²´ ê²€ìƒ‰...\n        }\n    }\n}\n```\n\nì´ í›„ `QueryResults\u003cTuple\u003e` í˜•íƒœì˜ ê²°ê³¼ê°’ì€ DTO í˜•íƒœë¡œ ë³€í™˜í•˜ì—¬ í˜ì´ì§€ì— ì „ë‹¬í•˜ë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.\n\n---\n\n## AWS S3 ì— ë°”ì´ë„ˆë¦¬ ì—…ë¡œë“œ\n\nJavaScript ìš© AWS SDK ê°€\nìˆìŠµë‹ˆë‹¤. [ê³µì‹ ë¬¸ì„œ](https://docs.aws.amazon.com/ko_kr/sdk-for-javascript/v2/developer-guide/welcome.html) ë¥¼ ì°¸ê³ í•˜ì—¬ AWS S3 ì— ì—…ë¡œë“œê°€\nê°€ëŠ¥í•˜ë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.\n\nì•ë‹¨ì€ ì—„ë°€íˆ ë”°ì§€ìë©´ Node.js í”„ë¡œì íŠ¸ê°€ ì•„ë‹ˆë¯€ë¡œ ë¸Œë¼ìš°ì € ìŠ¤í¬ë¦½íŠ¸ë¡œ SDK ë¥¼ í¬í•¨ì‹œì¼œì•¼ í–ˆìŠµë‹ˆë‹¤.\n\n```html\n\u003c!--resourcevermng.jsp--\u003e\n\n\u003c!-- ..... --\u003e\n\u003cscript src=\"https://sdk.amazonaws.com/js/aws-sdk-2.1254.0.min.js\u003e\u003c/script\u003e\n```\n\nAWS ì ‘ê·¼ ê¶Œí•œì„ ë¶€ì—¬í•˜ê¸°\nìœ„í•´ [ê³µì‹ ë¬¸ì„œ](https://docs.aws.amazon.com/ko_kr/sdk-for-javascript/v2/developer-guide/getting-started-browser.html) ì˜ 1ë‹¨ê³„,\n2ë‹¨ê³„ ë‚´ìš©ì„ ì°¸ê³ í•˜ì—¬ CognitoIdentity Pool ì„ ìƒì„±í•˜ê³  ì •ì±…ì„ ë¶€ì—¬í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ í›„ ê¶Œí•œì„ ê°€ì§„ Pool ID ë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ í¬í•¨ì‹œí‚¨ SDK ë¥¼ í™•ì¥í•©ë‹ˆë‹¤.\n\në§ˆì§€ë§‰ìœ¼ë¡œ ì—­ì‹œ ê³µì‹ ë¬¸ì„œë¥¼ ì°¸ì¡°í•˜ì—¬ í˜ì´ì§€ì—ì„œ ì „ë‹¬ë°›ì€ ë°”ì´ë„ˆë¦¬ íŒŒì¼ì„ AWS S3ì— ì—…ë¡œë“œ í•˜ì˜€ìŠµë‹ˆë‹¤.\n\n```js\nasync function uploadFileToS3() {\n    // ...v-model \u003e closure. file ì— ê´€í•œ ì •ë³´ë¥¼ ê°€ì ¸ì˜´\n    \n    var credentials = new AWS.CognitoIdentityCredentials({\n        IdentityPoolId: 'ap-northeast-2:key...'\n    });\n    AWS.config.update({\n        region: 'ap-northeast-2',\n        credentials,\n    });\n    let s3 = new AWS.s3({\n        computeChecksums: true\n    });\n    let body = {\n        Bucket: 'bucket-name',\n        Body: file,\n        Key: fileName\n    }\n    const putResult = await s3.putObject(body).promise();\n}\n\n```\n\n"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"1"},"buildId":"cdtoWMg52IhiWI2Amhzpf","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>